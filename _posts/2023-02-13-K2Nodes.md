---
layout: post
title: The mysteries of custom Blueprint nodes
---

During the development of my custom quest editor, Adventure, Iâ€™ve gotten very comfortable with creating custom nodes for both Blueprint and custom graphs. Since there is not much on the topic, I figured I could share my knowledge to the community. 

This blog post will only cover custom **Blueprint nodes** since a custom graph node is a different story.

## K2Node and what are they?

Kismet was the first visual scripting language in the engine. It was first introduced with Unreal Engine 3, then Kismet 2 came along and got renamed Blueprint, which is what we have today. So that is why you'll see K2 (Kismet 2) in some places of the engine. 

This naturally brings us to K2Node (Kismet 2 Node), the parent class for all nodes used for Blueprint graphs. Most of the nodes you see in the graph, inherits from **UK2Node_CallFunction**.

Making custom K2Nodes enables the developer to have complete control of the nodes rather than be limited to UFUNCTION/UPARAM specifiers, but 99% of the time, they are enough.

A great example of a custom Blueprint node is all construct nodes such as **Spawn Actor From Class** and **Construct Object From Class**, which greatly reduces the spaghetti of Blueprint graphs.

Spawn Actor consists of two Blueprint nodes, BeginDeferredActorSpawnFromClass and FinishSpawningActor, and for each variable, you mark as ExposeOnSpawn, the Blueprint compiler generates another Blueprint setter node.

So the execution order for a SpawnActor node is:

```javascript
BeginDeferredActorSpawnFromClass ->
Generated Blueprint node setters for ExposeOnSpawn variables ->
FinishSpawningActor
``` 
You can think of K2Nodes as subgraphs that can contain multiple nodes.

I'd suggest checking out **UK2Node_SpawnActorFromClass** as it is relatively straight forward with plenty of comments to understand what's happening.

**In progress...**